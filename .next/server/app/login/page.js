(()=>{var e={};e.id=626,e.ids=[626],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1891:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>l}),t(974),t(5996),t(5866);var o=t(3191),a=t(8716),s=t(7922),n=t.n(s),i=t(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(r,d);let l=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,974)),"/home/user/studio/src/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5996)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/user/studio/src/app/login/page.tsx"],u="/login/page",m={require:t,loadChunk:()=>Promise.resolve()},f=new o.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},1298:(e,r,t)=>{Promise.resolve().then(t.bind(t,4146))},4146:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>x});var o=t(326),a=t(7577),s=t(5047);(function(){var e=Error("Cannot find module '@hookform/resolvers/zod'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module 'react-hook-form'");throw e.code="MODULE_NOT_FOUND",e}(),function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}();var n=t(1664),i=t(1190),d=t(9752),l=t(9008),c=t(4584),u=t(6226),m=t(5095),f=t(7506);let p=Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}())({userId:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}())().min(1,"User ID / Phone Number is required"),password:Object(function(){var e=Error("Cannot find module 'zod'");throw e.code="MODULE_NOT_FOUND",e}())().optional()}).refine(e=>"admin"!==e.userId.toLowerCase()||!!e.password&&e.password.length>0,{message:"Password is required for admin login",path:["password"]}),x=()=>{let e=(0,s.useRouter)(),{toast:r}=(0,c.p)(),[t,x]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),[b,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{w(!0)},[]),(0,a.useEffect)(()=>{if(b){let r=(0,m.He)();console.log("Checked login status on mount:",r),r&&("admin"===r.toLowerCase()?e.replace("/admin"):e.replace("/"))}},[e,b]);let N=Object(function(){var e=Error("Cannot find module 'react-hook-form'");throw e.code="MODULE_NOT_FOUND",e}())({resolver:Object(function(){var e=Error("Cannot find module '@hookform/resolvers/zod'");throw e.code="MODULE_NOT_FOUND",e}())(p),defaultValues:{userId:"",password:""},mode:"onChange"}),v=N.watch("userId");(0,a.useEffect)(()=>{g(v?.toLowerCase()==="admin"),v?.toLowerCase()!=="admin"&&N.setValue("password","")},[v,N]);let j=(0,a.useCallback)(async t=>{x(!0),console.log("Login form submitted with data:",t);try{let o=await (0,m.So)(t.userId,t.password);(console.log("Authentication result:",o),o)?(r({title:"Login Successful",description:`Welcome, ${t.userId}! Redirecting...`}),"admin"===t.userId.toLowerCase()?e.push("/admin"):e.push("/")):r({title:"Login Failed",description:"Invalid User ID / Phone Number or Password. Please check and try again.",variant:"destructive"})}catch(e){console.error("Login error:",e),r({title:"Login Error",description:e.message||"An unexpected error occurred. Please try again later.",variant:"destructive"})}finally{x(!1)}},[e,r,N]);return b?(0,o.jsxs)("div",{className:"relative flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-100 dark:from-gray-800 dark:via-gray-900 dark:to-black p-4 overflow-hidden",children:[o.jsx(u.default,{src:"https://picsum.photos/seed/indiantruck/1920/1080",alt:"Background truck",layout:"fill",objectFit:"cover",quality:70,className:"absolute inset-0 z-0 opacity-20 dark:opacity-10",priority:!0}),(0,o.jsxs)(d.Zb,{className:"w-full max-w-sm z-10 shadow-2xl bg-card/80 backdrop-blur-sm dark:bg-card/70 border border-border/50",children:[" ",(0,o.jsxs)(d.Ol,{className:"text-center space-y-2",children:[(0,o.jsxs)("div",{className:"mx-auto h-12 w-12 text-primary",children:[" ",o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-full h-full",children:o.jsx("path",{d:"M12.378 1.602a.75.75 0 0 0-.756 0L3 6.632l9 5.25 9-5.25-8.622-5.03ZM21.75 7.93l-9 5.25v9l8.628-5.032a.75.75 0 0 0 .372-.648V7.93ZM11.25 22.18v-9l-9-5.25v8.57a.75.75 0 0 0 .372.648l8.628 5.032Z"})})]}),o.jsx(d.ll,{className:"text-2xl font-bold text-primary",children:"FieldTrack Login"}),o.jsx(d.SZ,{className:"text-muted-foreground",children:"E Wheels and Logistics Attendance"})]}),o.jsx(d.aY,{children:o.jsx(l.l0,{...N,children:(0,o.jsxs)("form",{onSubmit:N.handleSubmit(j),className:"space-y-4",children:[o.jsx(l.Wi,{control:N.control,name:"userId",render:({field:e})=>(0,o.jsxs)(l.xJ,{children:[o.jsx(l.lX,{children:"User ID / Phone Number"}),o.jsx(l.NI,{children:o.jsx(i.I,{placeholder:"Enter admin ID or your phone number",...e,disabled:t,className:"bg-input/50 dark:bg-input/30"})}),o.jsx(l.zG,{})]})}),h&&o.jsx(l.Wi,{control:N.control,name:"password",render:({field:e})=>(0,o.jsxs)(l.xJ,{children:[o.jsx(l.lX,{children:"Password"}),o.jsx(l.NI,{children:o.jsx(i.I,{type:"password",placeholder:"Enter admin password",...e,disabled:t,className:"bg-input/50 dark:bg-input/30"})}),o.jsx(l.zG,{})]})}),o.jsx(n.z,{type:"submit",className:"w-full",disabled:t,children:t?o.jsx(f.Z,{className:"mr-2 h-4 w-4 animate-spin"}):"Login"})]})})}),o.jsx(d.eW,{className:"text-center text-xs text-muted-foreground mt-4",children:"Login with your registered phone number or admin credentials."})]})]}):o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-100 via-indigo-100 to-purple-200",children:o.jsx(f.Z,{className:"h-16 w-16 animate-spin text-primary"})})}},9008:(e,r,t)=>{"use strict";t.d(r,{l0:()=>c,NI:()=>g,pf:()=>b,Wi:()=>m,xJ:()=>x,lX:()=>h,zG:()=>w});var o=t(326),a=t(7577),s=t(4214),n=t(1223),i=t(9360);!function(){var e=Error("Cannot find module '@radix-ui/react-label'");throw e.code="MODULE_NOT_FOUND",e}();let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef(({className:e,...r},t)=>o.jsx(Object(function(){var e=Error("Cannot find module '@radix-ui/react-label'");throw e.code="MODULE_NOT_FOUND",e}()),{ref:t,className:(0,n.cn)(d(),e),...r}));l.displayName=Object(function(){var e=Error("Cannot find module '@radix-ui/react-label'");throw e.code="MODULE_NOT_FOUND",e}()).displayName,function(){var e=Error("Cannot find module 'react-hook-form'");throw e.code="MODULE_NOT_FOUND",e}();let c=Object(function(){var e=Error("Cannot find module 'react-hook-form'");throw e.code="MODULE_NOT_FOUND",e}()),u=a.createContext({}),m=({...e})=>o.jsx(u.Provider,{value:{name:e.name},children:o.jsx(Object(function(){var e=Error("Cannot find module 'react-hook-form'");throw e.code="MODULE_NOT_FOUND",e}()),{...e})}),f=()=>{let e=a.useContext(u),r=a.useContext(p),{getFieldState:t,formState:o}=Object(function(){var e=Error("Cannot find module 'react-hook-form'");throw e.code="MODULE_NOT_FOUND",e}())(),s=t(e.name,o);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=r;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...s}},p=a.createContext({}),x=a.forwardRef(({className:e,...r},t)=>{let s=a.useId();return o.jsx(p.Provider,{value:{id:s},children:o.jsx("div",{ref:t,className:(0,n.cn)("space-y-2",e),...r})})});x.displayName="FormItem";let h=a.forwardRef(({className:e,...r},t)=>{let{error:a,formItemId:s}=f();return o.jsx(l,{ref:t,className:(0,n.cn)(a&&"text-destructive",e),htmlFor:s,...r})});h.displayName="FormLabel";let g=a.forwardRef(({...e},r)=>{let{error:t,formItemId:a,formDescriptionId:n,formMessageId:i}=f();return o.jsx(s.g7,{ref:r,id:a,"aria-describedby":t?`${n} ${i}`:`${n}`,"aria-invalid":!!t,...e})});g.displayName="FormControl";let b=a.forwardRef(({className:e,...r},t)=>{let{formDescriptionId:a}=f();return o.jsx("p",{ref:t,id:a,className:(0,n.cn)("text-[0.8rem] text-muted-foreground",e),...r})});b.displayName="FormDescription";let w=a.forwardRef(({className:e,children:r,...t},a)=>{let{error:s,formMessageId:i}=f(),d=s?String(s?.message):r;return d?o.jsx("p",{ref:a,id:i,className:(0,n.cn)("text-[0.8rem] font-medium text-destructive",e),...t,children:d}):null});w.displayName="FormMessage"},1190:(e,r,t)=>{"use strict";t.d(r,{I:()=>n});var o=t(326),a=t(7577),s=t(1223);let n=a.forwardRef(({className:e,type:r,...t},a)=>o.jsx("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));n.displayName="Input"},974:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});let o=(0,t(8570).createProxy)(String.raw`/home/user/studio/src/app/login/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[332,939,880],()=>t(1891));module.exports=o})();